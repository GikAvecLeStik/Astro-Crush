#include <iostream>
#include <windows.h>
#include <conio.h>

using namespace std;

//Para el borde
#define MINX 9
#define MINY 4
#define MAXX 158
#define MAXY 46

// Limites para el jugador
#define MINCOL 20 // X
#define MINREN 9  // y
#define MAXCOL 156  // X
#define MAXREN 46 // Y

//controles
#define FLECHA_ARRIBA 72
#define FLECHA_IZQ 75
#define FLECHA_DER 77
#define FLECHA_ABAJO 80
#define ESCAPE 27
#define ESPACIO ' '


#define NAVEIZQ 60
#define NAVEDER 62
#define NAVEARRIBA 94
#define NAVEABAJO 118


void MaximizarVentana();
void MoverCursor(short x, short y);
void pantalla ();
void limite ();


//-----------------------------------------
int main ()
{
    system("Color 0A");
    short x= MINCOL,y = MINREN ;
    char tecla;
    char nave;

    MaximizarVentana();
    pantalla ();
    limite ();


    MoverCursor(x,y);
    while(true){
        if(kbhit()){
          tecla = getch();
          if(tecla == ESCAPE) break;

            if(tecla == FLECHA_ARRIBA || tolower(tecla) == 'w') nave = NAVEARRIBA;
            if(tecla == FLECHA_IZQ || tolower(tecla) == 'a') nave = NAVEIZQ;
            if(tecla == FLECHA_ABAJO || tolower(tecla) == 's') nave = NAVEABAJO;
            if(tecla == FLECHA_DER || tolower(tecla) == 'd') nave = NAVEDER;


            if(y > MINREN && (tecla == FLECHA_ARRIBA || tolower(tecla) == 'w')){
                cout << ESPACIO;
                MoverCursor(x,--y);
            }

            if(x > MINCOL && (tecla == FLECHA_IZQ    || tolower(tecla) == 'a')) {
                cout << ESPACIO;
                MoverCursor(--x,y);
            }

            if(y < MAXREN && (tecla == FLECHA_ABAJO  || tolower(tecla) == 's')) {
                    cout << ESPACIO;
                    MoverCursor(x,++y);
            }
            if(x < MAXCOL && (tecla == FLECHA_DER    || tolower(tecla) == 'd')){
               cout << ESPACIO;
               MoverCursor(++x,y);
            }

            cout << nave << "\b";


        }
    }

    cout << "\n\n";
    system ("pause");
    return 0;
}
//-----------------------------------------
void pantalla ()
{
    short x = MINX ,y = MINY;
    MoverCursor(x,y);

     for (int i = 0; i <= MAXX ; i++){
        cout << ".";
    }
    for (int i = 0; i <= MAXY ; i++){
        MoverCursor(x,y);
        cout << ".";
        MoverCursor(167,++y);
        cout << "." << endl;
    }
    MoverCursor(x,y);
    for (int i = 0; i <= MAXX ; i++){
        cout << ".";
    }

}
//-----------------------------------------
void MaximizarVentana()
{
    keybd_event(VK_MENU,0x38,0,0);
    keybd_event(VK_RETURN,0x1c,0,0);
    keybd_event(VK_RETURN,0x1c,KEYEVENTF_KEYUP,0);
    keybd_event(VK_MENU,0x38,KEYEVENTF_KEYUP,0);
    return;
}
//-----------------------------------------
void MoverCursor(short x, short y)
{
    COORD coord = {x, y};

    SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE),coord);
}
//-----------------------------------------
void limite ()
{
    short x = 18 ,y = 8;
    MoverCursor(x,y);

     for (int i = 0; i <= 140 ; i++){
        cout << ".";
    }
    for (int i = 0; i <= 38 ; i++){
        MoverCursor(x,y);
        cout << ".";
        MoverCursor(158,++y);
        cout << "." << endl;
    }
    MoverCursor(x,y);
    for (int i = 0; i <= 140 ; i++){
        cout << ".";
    }

}
